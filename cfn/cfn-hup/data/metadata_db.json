{"cfn-auto-reloader-hook|Resources.MIDBastion.Metadata.AWS::CloudFormation::Init": {"configSets": {"bastion_install": ["install_cfn", "install_apps"]}, "install_apps": {"sources": {"c:\\": "https://advancemigrationtraining.s3.amazonaws.com/Migrations.zip"}, "files": {"c:\\putty.reg": {"source": "https://advancemigrationtraining.s3.amazonaws.com/putty.reg"}, "c:\\cfn\\scripts\\installpython.ps1": {"content": "Invoke-WebRequest \"https://www.python.org/ftp/python/3.7.6/python-3.7.6.exe\" -OutFile c:\\python.exe; Start-Process c:\\python.exe -ArgumentList '/quiet' -Verb RunAs -Wait; \nRemove-Item c:\\python.exe \n[Environment]::SetEnvironmentVariable ;(\"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python37-32\\\", $env:Path, [System.EnvironmentVariableTarget]::Machine)\n[Environment]::SetEnvironmentVariable ;(\"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python37-32\\Scripts\\\", $env:Path, [System.EnvironmentVariableTarget]::Machine) \npy.exe -m pip install --upgrade pip \npy.exe -m pip install requests \npy.exe -m pip install paramiko \npy.exe -m pip install boto3 \n"}, "c:\\cfn\\scripts\\installchrome.ps1": {"content": "$Path = $env:TEMP; $Installer = \"chrome_installer.exe\";\nInvoke-WebRequest \"http://dl.google.com/chrome/install/375.126/chrome_installer.exe\" -OutFile $Path\\$Installer; \nStart-Process -FilePath $Path\\$Installer -Args \"/silent /install\" -Verb RunAs -Wait;\nRemove-Item $Path\\$Installer\n"}, "c:\\cfn\\scripts\\installputty.ps1": {"content": "Invoke-WebRequest \"https://the.earth.li/~sgtatham/putty/0.74/w64/putty-64bit-0.74-installer.msi\" -OutFile c:\\putty.msi; \nStart-Process msiexec.exe -ArgumentList '/i c:\\putty.msi /q' -Verb RunAs -Wait;\nRemove-Item c:\\putty.msi\nNew-Item -ItemType SymbolicLink -Path 'C:\\Users\\Administrator\\Desktop\\' -name 'Putty' -Value 'C:\\Program Files\\PuTTY\\putty.exe'\nreg import c:\\putty.reg\n"}}, "commands": {"0-installpython": {"waitAfterCompletion": "5", "command": "powershell.exe c:\\cfn\\scripts\\installpython.ps1"}, "0-installputty": {"waitAfterCompletion": "5", "command": "powershell.exe c:\\cfn\\scripts\\installputty.ps1"}, "0-installchrome": {"waitAfterCompletion": "5", "command": "powershell.exe c:\\cfn\\scripts\\installchrome.ps1"}, "4-signal": {"command": "'cfn-signal.exe -e %ERRORLEVEL% --stack arn:aws:cloudformation:us-east-1:523660704145:stack/mod-5f9b522779364ded-SOURCEBASTION-E4P0S1KZRIF/78804180-d339-11eb-8145-0e1b8dfea4f7 --resource MIDBastion --region us-east-1\n"}}}, "install_cfn": {"files": {"c:\\cfn\\cfn-hup.conf": {"content": "[main]\nstack=arn:aws:cloudformation:us-east-1:523660704145:stack/mod-5f9b522779364ded-SOURCEBASTION-E4P0S1KZRIF/78804180-d339-11eb-8145-0e1b8dfea4f7\nregion=us-east-1\n"}, "c:\\cfn\\hooks.d\\cfn-auto-reloader.conf": {"content": "[cfn-auto-reloader-hook]\ntriggers=post.update\npath=Resources.MIDBastion.Metadata.AWS::CloudFormation::Init\naction=cfn-init.exe -v -s arn:aws:cloudformation:us-east-1:523660704145:stack/mod-5f9b522779364ded-SOURCEBASTION-E4P0S1KZRIF/78804180-d339-11eb-8145-0e1b8dfea4f7 -r MIDBastion --configsets bastion_install --region us-east-1\n"}}, "services": {"windows": {"cfn-hup": {"files": ["c:\\cfn\\cfn-hup.conf", "c:\\cfn\\hooks.d\\cfn-auto-reloader.conf"], "ensureRunning": "true", "enabled": "true"}}}}}}